(this["webpackJsonpwarframe-planner-frontend"]=this["webpackJsonpwarframe-planner-frontend"]||[]).push([[0],{222:function(e,t,n){},224:function(e,t,n){},258:function(e,t){},260:function(e,t){},270:function(e,t){},272:function(e,t){},299:function(e,t){},300:function(e,t){},305:function(e,t){},307:function(e,t){},314:function(e,t){},333:function(e,t){},350:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),i=n.n(c),o=(n(222),n(15)),u=n.n(o),s=n(28),l=n(23),d=(n(224),n(404)),f=n(43),j={name:"warframe-planner",version:1,objectStoresMeta:[{store:"items",storeConfig:{keyPath:"id",autoIncrement:!0,primaryKey:!0},storeSchema:[{name:"value",keypath:"value",options:{unique:!1}},{name:"checksum",keypath:"checksum",options:{unique:!0}}]},{store:"wishlist",storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}}]},{store:"inventory",storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}},{name:"id",keypath:"id",options:{unique:!1}},{name:"have",keypath:"have",options:{unique:!1}},{name:"need",keypath:"need",options:{unique:!1}}]},{store:"tracking",storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}}]}]},p=n(24),b=n(401),m=n(405),h=n(402),O=n(202),x=n(403),v=n(406),y=n(103),g=n(203),w=n(27),k=n(389),C=n(390),S=n(6);function N(e){var t=e.data,n=e.index,a=e.style;return r.a.cloneElement(t[n],{style:Object(p.a)(Object(p.a)({},a),{},{top:a.top+0})})}var A=r.a.createContext({}),D=r.a.forwardRef((function(e,t){var n=r.a.useContext(A);return Object(S.jsx)("div",Object(p.a)(Object(p.a)({ref:t},e),n))}));var E=r.a.forwardRef((function(e,t){var n=e.children,a=Object(y.a)(e,["children"]),c=r.a.Children.toArray(n),i=Object(w.a)(),o=Object(k.a)(i.breakpoints.up("sm"),{noSsr:!0}),u=c.length,s=o?36:48,l=function(e){return r.a.isValidElement(e)&&e.type===C.a?48:s},d=function(e){var t=r.a.useRef(null);return r.a.useEffect((function(){null!=t.current&&t.current.resetAfterIndex(0,!0)}),[e]),t}(u);return Object(S.jsx)("div",{ref:t,children:Object(S.jsx)(A.Provider,{value:a,children:Object(S.jsx)(g.a,{itemData:c,height:(u>8?8*s:c.map(l).reduce((function(e,t){return e+t}),0))+0,width:"100%",ref:d,outerElementType:D,innerElementType:"ul",itemSize:function(e){return l(c[e])},overscanCount:5,itemCount:u,children:N})})})})),I=n(197),P=n.n(I),q=function(e){var t=Object(a.useState)(),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useCallback)((function(e){return{value:e.amount?"".concat(e.amount," ").concat(e.name):e.name,nodes:e.components?e.components.map((function(e){return i(e)})):[]}}),[]);return Object(a.useEffect)((function(){e.data&&c(i(e.data))}),[e.data,i]),Object(S.jsx)(S.Fragment,{children:r&&Object(S.jsx)(P.a,{tree:[r]})})},B=n(198),R=function e(t,n,a,r,c){Object(B.a)(this,e),this.name="",this.id="",this.amount=1,this.imageName="",this.components=[],this.name=t||"",this.id=n||"",this.amount=a||1,this.components=r||[],this.imageName=c||""},T=r.a.createContext(new Map),F=function(){var e=Object(a.useContext)(T),t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(void 0),o=Object(l.a)(i,2),j=o[0],b=o[1],m=Object(a.useState)(void 0),h=Object(l.a)(m,2),y=h[0],g=h[1],w=Object(a.useState)([]),k=Object(l.a)(w,2),C=k[0],N=k[1],A=Object(f.useIndexedDB)("wishlist"),D=Object(a.useCallback)((function(t){var n=new RegExp(t,"i"),a=Array.from(e.values()).filter((function(e){return e.name.match(n)})).map((function(e){return new R(e.name,e.uniqueName)}));c(a)}),[e]),I=Object(a.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(n,a){var r,c,i,o,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.get(a),c=void 0,r&&r.components&&(c={buildQuantity:r.buildQuantity,components:r.components.map((function(e){return{name:e.name,id:e.uniqueName,amount:e.itemCount,imageName:e.imageName}}))}),c){t.next=5;break}return t.abrupt("return",n);case 5:return i=n,t.next=8,Promise.all(c.components.map(function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(new R(t.name,t.id,t.amount,[],t.imageName),t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return o=t.sent,i.components=[],i.amount&&o?(l=Math.ceil(i.amount/c.buildQuantity),i.components=o.map((function(e){var t=Object(p.a)({},e);return"Blueprint"!==e.name&&(t.amount*=l),t}))):o&&(i.components=o),i.components.filter((function(e){return null!==e&&void 0!==e})),t.abrupt("return",i);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[e]);return Object(a.useEffect)((function(){D(".*")}),[D]),Object(a.useEffect)((function(){Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getAll();case 2:return t=e.sent.filter((function(e){return!C.find((function(t){return t.id===e.id}))})),e.next=5,Promise.all(t.map((function(e){return I(e,e.id)})));case 5:(n=e.sent).push.apply(n,Object(O.a)(C)),N(n);case 8:case"end":return e.stop()}}),e)})))()}),[A,C,I]),Object(a.useEffect)((function(){Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I(j,j.id);case 4:t=e.sent,g(t);case 6:case"end":return e.stop()}}),e)})))()}),[j,I]),Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(v.a,{id:"combo-box-demo",options:r,ListboxComponent:E,getOptionLabel:function(e){return e.name},style:{width:300},onChange:function(e,t){t&&b(t)},renderInput:function(e){return Object(S.jsx)(x.a,Object(p.a)(Object(p.a)({},e),{},{label:"Item search",variant:"outlined"}))}}),Object(S.jsxs)(d.a,{style:{width:"20vw"},children:[Object(S.jsx)(q,{data:y}),C.map((function(e){return Object(S.jsx)(q,{data:e},e.id)}))]})]})},L=n(400),M=n(411),J=n(410),Q=n(396),H=n(397),W=n(398),Y=n(399),z=function(e){return Object(S.jsxs)(J.a,{open:e.open,onClose:function(){return e.handleClose(-1)},"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[Object(S.jsx)(Q.a,{id:"dialog-title",children:e.title}),Object(S.jsx)(H.a,{children:Object(S.jsx)(W.a,{id:"dialog-description",children:e.body})}),Object(S.jsx)(Y.a,{children:e.choices.map((function(t,n){return Object(S.jsx)(L.a,{onClick:function(){return e.handleClose(n)},color:t.color,children:t.text},n)}))})]})},K=n(408),U=function(e){return Object(S.jsx)(K.a,Object(p.a)({elevation:6,variant:"filled"},e))},V=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(l.a)(c,2),o=i[0],j=i[1],p=Object(a.useState)(!1),b=Object(l.a)(p,2),m=b[0],h=b[1],O=Object(f.useIndexedDB)("wishlist"),x=Object(f.useIndexedDB)("inventory"),v=[{text:"Cancel",color:"secondary"},{text:"Apply",color:"primary"}],y=function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Apply"!==v[t].text){e.next=7;break}return e.next=3,O.getAll();case 3:return n=e.sent,console.log("data",n),e.next=7,Promise.all(n.map((function(e){return O.deleteRecord(e.id)})));case 7:r(!1),h(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Apply"!==v[t].text){e.next=6;break}return e.next=3,x.getAll();case 3:return n=e.sent,e.next=6,Promise.all(n.map((function(e){return x.deleteRecord(e.id)})));case 6:j(!1),h(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(d.a,{children:[Object(S.jsx)(L.a,{variant:"contained",onClick:function(){return j(!0)},children:"Clear ALL data"}),Object(S.jsx)(L.a,{variant:"contained",onClick:function(){return r(!0)},children:"Clear wishlist data"}),Object(S.jsx)(L.a,{variant:"contained",onClick:function(){return j(!0)},children:"Clear inventory data"}),Object(S.jsx)(L.a,{variant:"contained",onClick:function(){return j(!0)},children:"Clear items data"}),Object(S.jsx)(L.a,{variant:"contained",onClick:function(){return j(!0)},children:"Clear tracking data"}),Object(S.jsx)(z,{open:n,body:"This will remove all wishlist Data. You CANNOT revert this operation",title:"Do you really want to remove all your wishlist Data ?",choices:v,handleClose:y}),Object(S.jsx)(z,{open:o,body:"This will remove all inventory Data. You CANNOT revert this operation",title:"Do you really want to remove all your inventory Data ?",choices:v,handleClose:g}),Object(S.jsx)(M.a,{open:m,autoHideDuration:6e3,onClose:function(){return h(!1)},children:Object(S.jsx)(U,{onClose:function(){return h(!1)},severity:"success",children:"Database successfully updated"})})]})},G=[{id:"wishlist","aria-controls":"wishlist",page:Object(S.jsx)(F,{})},{id:"manage data storage","aria-controls":"manage data storage",page:Object(S.jsx)(V,{})}],X=function(e){var t=e.children,n=e.value,a=e.index,r=Object(y.a)(e,["children","value","index"]);return Object(S.jsx)(d.a,Object(p.a)(Object(p.a)({role:"tabpanel",hidden:n!==a,id:G[a].id,"aria-labelledby":G[a].id},r),{},{children:n===a&&Object(S.jsx)(d.a,{p:3,children:t})}))},Z=function(){var e=r.a.useState(0),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(b.a,{position:"static",children:Object(S.jsx)(m.a,{value:n,onChange:function(e,t){a(t)},"aria-label":"warframe-planner navigation",centered:!0,children:G.map((function(e){return Object(S.jsx)(h.a,Object(p.a)({label:e.id},e),e.id)}))})}),G.map((function(e,t){return Object(S.jsx)(X,{value:n,index:t,children:e.page},t)}))]})},$=n(200),_=n.n($),ee=n(201),te=n.n(ee),ne=function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("https://raw.githubusercontent.com/WFCD/warframe-items/master/data/json/All.json");case 2:return t=e.sent,n=JSON.stringify(t.data),a=te.a.createHash("md5").update(n).digest("hex"),e.abrupt("return",{checksum:a,value:n});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(f.initDB)(j);var ae=function(){var e=Object(f.useIndexedDB)("items"),t=Object(a.useState)(!0),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(new Map),o=Object(l.a)(i,2),j=o[0],p=o[1],b=Object(a.useCallback)(Object(s.a)(u.a.mark((function t(){var n,a,r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Updating items"),t.next=3,ne();case 3:return n=t.sent,t.next=6,e.getAll();case 6:if(0!==(a=t.sent).length){t.next=13;break}return t.next=10,e.add(n);case 10:console.log("No items yet, updating items"),t.next=22;break;case 13:if(a[0].checksum!==n.checksum){t.next=17;break}console.log("Same checksum, continue"),t.next=22;break;case 17:return console.log("Replacing older version"),t.next=20,Promise.all(a.map(function(){var t=Object(s.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.deleteRecord(n.id));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 20:return t.next=22,e.add(n);case 22:r=JSON.parse(n.value),i=new Map,r.forEach((function(e){return i.set(e.uniqueName,e)})),p(i),c(!1);case 27:case"end":return t.stop()}}),t)}))),[e]);Object(a.useEffect)((function(){Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}),[b]);var m;return Object(S.jsx)(d.a,{className:"App",children:Object(S.jsx)(T.Provider,{value:j,children:(m=r,m?Object(S.jsx)("h1",{children:"Loading Warframe items please wait ..."}):Object(S.jsx)(Z,{}))})})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,413)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(ae,{})}),document.getElementById("root")),re()}},[[350,1,2]]]);
//# sourceMappingURL=main.afa59794.chunk.js.map