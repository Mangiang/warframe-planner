(this["webpackJsonpwarframe-planner-frontend"]=this["webpackJsonpwarframe-planner-frontend"]||[]).push([[0],{219:function(e,t,n){},221:function(e,t,n){},255:function(e,t){},257:function(e,t){},267:function(e,t){},269:function(e,t){},296:function(e,t){},297:function(e,t){},302:function(e,t){},304:function(e,t){},311:function(e,t){},330:function(e,t){},347:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),i=n.n(c),o=(n(219),n(16)),u=n.n(o),s=n(30),l=n(23),d=(n(221),n(400)),j=n(402),b=n(53),f={name:"warframe-planner",version:1,objectStoresMeta:[{store:"items",storeConfig:{keyPath:"id",autoIncrement:!0,primaryKey:!0},storeSchema:[{name:"value",keypath:"value",options:{unique:!1}},{name:"checksum",keypath:"checksum",options:{unique:!0}}]},{store:"wishlist",storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}}]},{store:"inventory",storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}},{name:"id",keypath:"id",options:{unique:!1}},{name:"have",keypath:"have",options:{unique:!1}},{name:"need",keypath:"need",options:{unique:!1}}]},{store:"tracking",storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}}]}]},m=n(24),p=n(398),h=n(403),O=n(399),x=n(401),v=n(404),y=n(101),g=n(200),k=n(27),w=n(386),C=n(387),S=n(6);function N(e){var t=e.data,n=e.index,a=e.style;return r.a.cloneElement(t[n],{style:Object(m.a)(Object(m.a)({},a),{},{top:a.top+0})})}var A=r.a.createContext({}),D=r.a.forwardRef((function(e,t){var n=r.a.useContext(A);return Object(S.jsx)("div",Object(m.a)(Object(m.a)({ref:t},e),n))}));var E=r.a.forwardRef((function(e,t){var n=e.children,a=Object(y.a)(e,["children"]),c=r.a.Children.toArray(n),i=Object(k.a)(),o=Object(w.a)(i.breakpoints.up("sm"),{noSsr:!0}),u=c.length,s=o?36:48,l=function(e){return r.a.isValidElement(e)&&e.type===C.a?48:s},d=function(e){var t=r.a.useRef(null);return r.a.useEffect((function(){null!=t.current&&t.current.resetAfterIndex(0,!0)}),[e]),t}(u);return Object(S.jsx)("div",{ref:t,children:Object(S.jsx)(A.Provider,{value:a,children:Object(S.jsx)(g.a,{itemData:c,height:(u>8?8*s:c.map(l).reduce((function(e,t){return e+t}),0))+0,width:"100%",ref:d,outerElementType:D,innerElementType:"ul",itemSize:function(e){return l(c[e])},overscanCount:5,itemCount:u,children:N})})})})),I=n(195),P=n.n(I),q=function(e){var t=Object(a.useState)(),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useCallback)((function(e){return{value:e.amount?"".concat(e.amount," ").concat(e.name):e.name,nodes:e.components?e.components.map((function(e){return i(e)})):[]}}),[]);return Object(a.useEffect)((function(){e.data&&c(i(e.data))}),[e.data,i]),Object(S.jsx)(S.Fragment,{children:r&&Object(S.jsx)(P.a,{tree:[r]})})},F=n(196),R=function e(t,n,a,r,c){Object(F.a)(this,e),this.name="",this.id="",this.amount=1,this.imageName="",this.components=[],this.name=t||"",this.id=n||"",this.amount=a||1,this.components=r||[],this.imageName=c||""},T=r.a.createContext(new Map),B=function(){var e=Object(a.useContext)(T),t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(void 0),o=Object(l.a)(i,2),d=o[0],b=o[1],f=Object(a.useState)(void 0),p=Object(l.a)(f,2),h=p[0],O=p[1],y=Object(a.useCallback)((function(t){var n=new RegExp(t,"i"),a=Array.from(e.values()).filter((function(e){return e.name.match(n)})).map((function(e){return new R(e.name,e.uniqueName)}));c(a)}),[e]),g=Object(a.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(n,a){var r,c,i,o,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.get(a),c=void 0,r&&r.components&&(c={buildQuantity:r.buildQuantity,components:r.components.map((function(e){return{name:e.name,id:e.uniqueName,amount:e.itemCount,imageName:e.imageName}}))}),c){t.next=5;break}return t.abrupt("return",n);case 5:return i=n,t.next=8,Promise.all(c.components.map(function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(new R(t.name,t.id,t.amount,[],t.imageName),t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return o=t.sent,i.components=[],i.amount&&o?(l=Math.ceil(i.amount/c.buildQuantity),i.components=o.map((function(e){var t=Object(m.a)({},e);return"Blueprint"!==e.name&&(t.amount*=l),t}))):o&&(i.components=o),i.components.filter((function(e){return null!==e&&void 0!==e})),t.abrupt("return",i);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[e]);return Object(a.useEffect)((function(){y(".*")}),[y]),Object(a.useEffect)((function(){Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,g(d,d.id);case 4:t=e.sent,O(t);case 6:case"end":return e.stop()}}),e)})))()}),[d,g]),Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(v.a,{id:"combo-box-demo",options:r,ListboxComponent:E,getOptionLabel:function(e){return e.name},style:{width:300},onChange:function(e,t){t&&b(t)},renderInput:function(e){return Object(S.jsx)(x.a,Object(m.a)(Object(m.a)({},e),{},{label:"Item search",variant:"outlined"}))}}),Object(S.jsx)(j.a,{style:{width:"20vw"},children:Object(S.jsx)(q,{data:h})})]})},L=n(397),M=n(409),J=n(408),Q=n(393),H=n(394),W=n(395),Y=n(396),z=function(e){return Object(S.jsxs)(J.a,{open:e.open,onClose:function(){return e.handleClose(-1)},"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[Object(S.jsx)(Q.a,{id:"dialog-title",children:e.title}),Object(S.jsx)(H.a,{children:Object(S.jsx)(W.a,{id:"dialog-description",children:e.body})}),Object(S.jsx)(Y.a,{children:e.choices.map((function(t,n){return Object(S.jsx)(L.a,{onClick:function(){return e.handleClose(n)},color:t.color,children:t.text},n)}))})]})},K=n(406),U=function(e){return Object(S.jsx)(K.a,Object(m.a)({elevation:6,variant:"filled"},e))},V=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(l.a)(c,2),o=i[0],d=i[1],f=Object(a.useState)(!1),m=Object(l.a)(f,2),p=m[0],h=m[1],O=Object(b.useIndexedDB)("wishlist"),x=Object(b.useIndexedDB)("inventory"),v=[{text:"Cancel",color:"secondary"},{text:"Apply",color:"primary"}],y=function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Apply"!==v[t].text){e.next=7;break}return e.next=3,O.getAll();case 3:return n=e.sent,console.log("data",n),e.next=7,Promise.all(n.map((function(e){return O.deleteRecord(e.id)})));case 7:r(!1),h(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Apply"!==v[t].text){e.next=6;break}return e.next=3,x.getAll();case 3:return n=e.sent,e.next=6,Promise.all(n.map((function(e){return x.deleteRecord(e.id)})));case 6:d(!1),h(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(j.a,{children:[Object(S.jsx)(L.a,{variant:"contained",onClick:function(){return d(!0)},children:"Clear ALL data"}),Object(S.jsx)(L.a,{variant:"contained",onClick:function(){return r(!0)},children:"Clear wishlist data"}),Object(S.jsx)(L.a,{variant:"contained",onClick:function(){return d(!0)},children:"Clear inventory data"}),Object(S.jsx)(L.a,{variant:"contained",onClick:function(){return d(!0)},children:"Clear items data"}),Object(S.jsx)(L.a,{variant:"contained",onClick:function(){return d(!0)},children:"Clear tracking data"}),Object(S.jsx)(z,{open:n,body:"This will remove all wishlist Data. You CANNOT revert this operation",title:"Do you really want to remove all your wishlist Data ?",choices:v,handleClose:y}),Object(S.jsx)(z,{open:o,body:"This will remove all inventory Data. You CANNOT revert this operation",title:"Do you really want to remove all your inventory Data ?",choices:v,handleClose:g}),Object(S.jsx)(M.a,{open:p,autoHideDuration:6e3,onClose:function(){return h(!1)},children:Object(S.jsx)(U,{onClose:function(){return h(!1)},severity:"success",children:"Database successfully updated"})})]})},G=[{id:"wishlist","aria-controls":"wishlist",page:Object(S.jsx)(B,{})},{id:"manage data storage","aria-controls":"manage data storage",page:Object(S.jsx)(V,{})}],X=function(e){var t=e.children,n=e.value,a=e.index,r=Object(y.a)(e,["children","value","index"]);return Object(S.jsx)(j.a,Object(m.a)(Object(m.a)({role:"tabpanel",hidden:n!==a,id:G[a].id,"aria-labelledby":G[a].id},r),{},{children:n===a&&Object(S.jsx)(j.a,{p:3,children:t})}))},Z=function(){var e=r.a.useState(0),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(p.a,{position:"static",children:Object(S.jsx)(h.a,{value:n,onChange:function(e,t){a(t)},"aria-label":"warframe-planner navigation",centered:!0,children:G.map((function(e){return Object(S.jsx)(O.a,Object(m.a)({label:e.id},e),e.id)}))})}),G.map((function(e,t){return Object(S.jsx)(X,{value:n,index:t,children:e.page},t)}))]})},$=n(198),_=n.n($),ee=n(199),te=n.n(ee),ne=function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("https://raw.githubusercontent.com/WFCD/warframe-items/master/data/json/All.json");case 2:return t=e.sent,n=JSON.stringify(t.data),a=te.a.createHash("md5").update(n).digest("hex"),e.abrupt("return",{checksum:a,value:n});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(b.initDB)(f);var ae=function(){var e=Object(b.useIndexedDB)("items"),t=Object(a.useState)(!0),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(l.a)(i,2),f=o[0],m=o[1],p=Object(a.useState)(new Map),h=Object(l.a)(p,2),O=h[0],x=h[1],v=Object(a.useCallback)(Object(s.a)(u.a.mark((function t(){var n,a,r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Updating items"),t.next=3,ne();case 3:return n=t.sent,t.next=6,e.getAll();case 6:if(0!==(a=t.sent).length){t.next=13;break}return t.next=10,e.add(n);case 10:console.log("No items yet, updating items"),t.next=22;break;case 13:if(a[0].checksum!==n.checksum){t.next=17;break}console.log("Same checksum, continue"),t.next=22;break;case 17:return console.log("Replacing older version"),t.next=20,Promise.all(a.map(function(){var t=Object(s.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.deleteRecord(n.id));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 20:return t.next=22,e.add(n);case 22:r=JSON.parse(n.value),i=new Map,r.forEach((function(e){return i.set(e.uniqueName,e)})),x(i),c(!1);case 27:case"end":return t.stop()}}),t)}))),[e]);Object(a.useEffect)((function(){f||(m(!0),Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))())}),[f,v]);var y;return Object(S.jsx)(j.a,{className:"App",children:Object(S.jsx)(T.Provider,{value:O,children:(y=r,y?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h1",{children:"Loading Warframe items please wait ..."}),Object(S.jsx)(d.a,{})]}):Object(S.jsx)(Z,{}))})})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,411)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(ae,{})}),document.getElementById("root")),re()}},[[347,1,2]]]);
//# sourceMappingURL=main.5e2531f0.chunk.js.map