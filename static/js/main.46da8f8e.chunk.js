(this["webpackJsonpwarframe-planner-frontend"]=this["webpackJsonpwarframe-planner-frontend"]||[]).push([[0],{222:function(e,t,n){},224:function(e,t,n){},258:function(e,t){},260:function(e,t){},270:function(e,t){},272:function(e,t){},299:function(e,t){},300:function(e,t){},305:function(e,t){},307:function(e,t){},314:function(e,t){},333:function(e,t){},350:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),i=n.n(c),o=(n(222),n(18)),u=n.n(o),s=n(33),l=n(25),d=(n(224),n(403)),b=n(405),p=n(43),j={name:"warframe-planner",version:1,objectStoresMeta:[{store:"items",storeConfig:{keyPath:"id",autoIncrement:!0,primaryKey:!0},storeSchema:[{name:"value",keypath:"value",options:{unique:!1}},{name:"checksum",keypath:"checksum",options:{unique:!0}}]},{store:"wishlist",storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}}]},{store:"inventory",storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}},{name:"id",keypath:"id",options:{unique:!1}},{name:"have",keypath:"have",options:{unique:!1}},{name:"need",keypath:"need",options:{unique:!1}}]},{store:"tracking",storeConfig:{keyPath:"id",autoIncrement:!1},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}}]}]},m=n(23),f=n(401),h=n(406),O=n(402),x=n(404),v=n(407),g=n(104),y=n(203),k=n(27),w=n(389),C=n(390),S=n(6);function N(e){var t=e.data,n=e.index,a=e.style;return r.a.cloneElement(t[n],{style:Object(m.a)(Object(m.a)({},a),{},{top:a.top+0})})}var A=r.a.createContext({}),D=r.a.forwardRef((function(e,t){var n=r.a.useContext(A);return Object(S.jsx)("div",Object(m.a)(Object(m.a)({ref:t},e),n))}));var I=r.a.forwardRef((function(e,t){var n=e.children,a=Object(g.a)(e,["children"]),c=r.a.Children.toArray(n),i=Object(k.a)(),o=Object(w.a)(i.breakpoints.up("sm"),{noSsr:!0}),u=c.length,s=o?36:48,l=function(e){return r.a.isValidElement(e)&&e.type===C.a?48:s},d=function(e){var t=r.a.useRef(null);return r.a.useEffect((function(){null!=t.current&&t.current.resetAfterIndex(0,!0)}),[e]),t}(u);return Object(S.jsx)("div",{ref:t,children:Object(S.jsx)(A.Provider,{value:a,children:Object(S.jsx)(y.a,{itemData:c,height:(u>8?8*s:c.map(l).reduce((function(e,t){return e+t}),0))+0,width:"100%",ref:d,outerElementType:D,innerElementType:"ul",itemSize:function(e){return l(c[e])},overscanCount:5,itemCount:u,children:N})})})})),E=n(198),q=n.n(E),P=function(e){var t=Object(a.useState)(),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useCallback)((function(e){return{value:e.amount?"".concat(e.amount," ").concat(e.name):e.name,nodes:e.components?e.components.map((function(e){return i(e)})):[]}}),[]);return Object(a.useEffect)((function(){e.data&&c(i(e.data))}),[e.data,i]),Object(S.jsx)(S.Fragment,{children:r&&Object(S.jsx)(q.a,{tree:[r]})})},R=n(199),B=function e(t,n,a,r,c){Object(R.a)(this,e),this.name="",this.id="",this.amount=1,this.imageName="",this.components=[],this.name=t||"",this.id=n||"",this.amount=a||1,this.components=r||[],this.imageName=c||""},F=r.a.createContext(new Map),T=function(){var e=Object(a.useContext)(F),t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(void 0),o=Object(l.a)(i,2),d=o[0],p=o[1],j=Object(a.useState)(void 0),f=Object(l.a)(j,2),h=f[0],O=f[1],g=Object(a.useCallback)((function(t){var n=new RegExp(t,"i"),a=Array.from(e.values()).filter((function(e){return e.name.match(n)})).map((function(e){return new B(e.name,e.uniqueName)}));c(a)}),[e]),y=Object(a.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(n,a){var r,c,i,o,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.get(a),c=void 0,r&&r.components&&(c={buildQuantity:r.buildQuantity,components:r.components.map((function(e){return{name:e.name,id:e.uniqueName,amount:e.itemCount,imageName:e.imageName}}))}),c){t.next=5;break}return t.abrupt("return",n);case 5:return i=n,t.next=8,Promise.all(c.components.map(function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(new B(t.name,t.id,t.amount,[],t.imageName),t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return o=t.sent,i.components=[],i.amount&&o?(l=Math.ceil(i.amount/c.buildQuantity),i.components=o.map((function(e){var t=Object(m.a)({},e);return"Blueprint"!==e.name&&(t.amount*=l),t}))):o&&(i.components=o),i.components.filter((function(e){return null!==e&&void 0!==e})),t.abrupt("return",i);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[e]);return Object(a.useEffect)((function(){g(".*")}),[g]),Object(a.useEffect)((function(){Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y(d,d.id);case 4:t=e.sent,O(t);case 6:case"end":return e.stop()}}),e)})))()}),[d,y]),Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(v.a,{id:"combo-box-demo",options:r,ListboxComponent:I,getOptionLabel:function(e){return e.name},style:{width:300},onChange:function(e,t){t&&p(t)},renderInput:function(e){return Object(S.jsx)(x.a,Object(m.a)(Object(m.a)({},e),{},{label:"Item search",variant:"outlined"}))}}),Object(S.jsx)(b.a,{style:{width:"20vw"},children:Object(S.jsx)(P,{data:h})})]})},M=n(80),L=n(400),J=n(412),Q=n(411),H=n(396),W=n(397),_=n(398),z=n(399),K=function(e){return Object(S.jsxs)(Q.a,{open:e.open,onClose:function(){return e.handleClose(-1)},"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[Object(S.jsx)(H.a,{id:"dialog-title",children:e.title}),Object(S.jsx)(W.a,{children:Object(S.jsx)(_.a,{id:"dialog-description",children:e.body})}),Object(S.jsx)(z.a,{children:e.choices.map((function(t,n){return Object(S.jsx)(L.a,{onClick:function(){return e.handleClose(n)},color:t.color,children:t.text},n)}))})]})},U=n(409),V=function(e){return Object(S.jsx)(U.a,Object(m.a)({elevation:6,variant:"filled"},e))},Y=[{text:"Cancel",color:"secondary"},{text:"Apply",color:"primary"}],G=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(l.a)(c,2),o=i[0],d=i[1],j=Object(p.useIndexedDB)("wishlist"),m=Object(p.useIndexedDB)("inventory"),f=Object(p.useIndexedDB)("tracking"),h=Object(p.useIndexedDB)("items"),O=[{open:n,title:"Do you really want to remove all your Data ?",body:"This will remove all Data. You CANNOT revert this operation",choices:Y,handleClose:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(!1),"Apply"!==Y[t].text){e.next=21;break}return e.next=4,j.getAll();case 4:return n=e.sent,e.next=7,m.getAll();case 7:return a=e.sent,e.next=10,f.getAll();case 10:return c=e.sent,e.next=13,h.getAll();case 13:return i=e.sent,o=[],n.length>0&&o.push.apply(o,Object(M.a)(n.map((function(e){return j.deleteRecord(e.id)})))),a.length>0&&o.push.apply(o,Object(M.a)(a.map((function(e){return m.deleteRecord(e.id)})))),c.length>0&&o.push.apply(o,Object(M.a)(c.map((function(e){return f.deleteRecord(e.id)})))),i.length>0&&o.push.apply(o,Object(M.a)(i.map((function(e){return h.deleteRecord(e.id)})))),e.next=21,Promise.all(o);case 21:d(!0);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),buttonText:"Clear tracking data",buttonOnClick:function(){return r(!0)}}];return Object(S.jsxs)(b.a,{children:[O.map((function(e,t){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(L.a,{variant:"contained",onClick:e.buttonOnClick,children:e.buttonText},"button_".concat(t)),Object(S.jsx)(K,{open:e.open,title:e.title,body:e.body,choices:e.choices,handleClose:e.handleClose},"diag_".concat(t))]})})),Object(S.jsx)(J.a,{open:o,autoHideDuration:6e3,onClose:function(){return d(!1)},children:Object(S.jsx)(V,{onClose:function(){return d(!1)},severity:"success",children:"Database successfully updated"})})]})},X=[{id:"wishlist","aria-controls":"wishlist",page:Object(S.jsx)(T,{})},{id:"manage data storage","aria-controls":"manage data storage",page:Object(S.jsx)(G,{})}],Z=function(e){var t=e.children,n=e.value,a=e.index,r=Object(g.a)(e,["children","value","index"]);return Object(S.jsx)(b.a,Object(m.a)(Object(m.a)({role:"tabpanel",hidden:n!==a,id:X[a].id,"aria-labelledby":X[a].id},r),{},{children:n===a&&Object(S.jsx)(b.a,{p:3,children:t})}))},$=function(){var e=r.a.useState(0),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(f.a,{position:"static",children:Object(S.jsx)(h.a,{value:n,onChange:function(e,t){a(t)},"aria-label":"warframe-planner navigation",centered:!0,children:X.map((function(e){return Object(S.jsx)(O.a,Object(m.a)({label:e.id},e),e.id)}))})}),X.map((function(e,t){return Object(S.jsx)(Z,{value:n,index:t,children:e.page},t)}))]})},ee=n(201),te=n.n(ee),ne=n(202),ae=n.n(ne),re=function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.a.get("https://raw.githubusercontent.com/WFCD/warframe-items/master/data/json/All.json");case 2:return t=e.sent,n=JSON.stringify(t.data),a=ae.a.createHash("md5").update(n).digest("hex"),e.abrupt("return",{checksum:a,value:n});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(p.initDB)(j);var ce=function(){var e=Object(p.useIndexedDB)("items"),t=Object(a.useState)(!0),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(l.a)(i,2),j=o[0],m=o[1],f=Object(a.useState)(new Map),h=Object(l.a)(f,2),O=h[0],x=h[1],v=Object(a.useCallback)(Object(s.a)(u.a.mark((function t(){var n,a,r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Updating items"),t.next=3,re();case 3:return n=t.sent,t.next=6,e.getAll();case 6:if(0!==(a=t.sent).length){t.next=13;break}return t.next=10,e.add(n);case 10:console.log("No items yet, updating items"),t.next=22;break;case 13:if(a[0].checksum!==n.checksum){t.next=17;break}console.log("Same checksum, continue"),t.next=22;break;case 17:return console.log("Replacing older version"),t.next=20,Promise.all(a.map(function(){var t=Object(s.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.deleteRecord(n.id));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 20:return t.next=22,e.add(n);case 22:r=JSON.parse(n.value),i=new Map,r.forEach((function(e){return i.set(e.uniqueName,e)})),x(i),c(!1);case 27:case"end":return t.stop()}}),t)}))),[e]);Object(a.useEffect)((function(){j||(m(!0),Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))())}),[j,v]);var g;return Object(S.jsx)(b.a,{className:"App",children:Object(S.jsx)(F.Provider,{value:O,children:(g=r,g?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h1",{children:"Loading Warframe items please wait ..."}),Object(S.jsx)(d.a,{})]}):Object(S.jsx)($,{}))})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,414)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(ce,{})}),document.getElementById("root")),ie()}},[[350,1,2]]]);
//# sourceMappingURL=main.46da8f8e.chunk.js.map